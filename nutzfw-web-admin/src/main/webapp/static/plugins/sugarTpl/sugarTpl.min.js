!function(e,t){"use strict";"function"==typeof define&&define.amd&&define([],function(){return t.call(e)}),"object"==typeof exports&&"object"==typeof module?module.exports=t.call(e):e.sugarTpl=t.call(e,document)}("object"==typeof global?global:window,function(){"use strict";var e,t={evaluate:/(\{@)|(@\/\w+\})/g,tagStart:/(\{@)/g,tagClose:/(\}@\/\w+\})/g,tagConnection:/(\})@\/\w+.\{@(\w+)(\{)/g,connection:/\}@\/\w+\}\{@\w+\{/g,sentenceStart:/\{@(.\w+.+)/g,sentenceEnd:/\}@\/\w+./g,variant:/\$\{([\s\S]*?)\}/g,variantExp:/^\${|}/g},r=function(e,r){if("undefined"!=typeof r&&"string"==typeof r){var n=new RegExp(r+"\\{([\\s\\S]*?)\\}","g"),a=new RegExp("^"+r+"{|}","g");t.variant=n,t.variantExp=a}this.template=e.replace(/(^\s+)|(\s+$)/g,"")};r.fn=r.prototype,r.fn.version="0.0.1",r.extend=function(){var e=[].slice.call(arguments);if("object"!=typeof e[0])return e[0];for(var t in e[1])e[0][t]="object"==typeof e[1][t]?this.extend(e[1][t]):e[1][t]};var n={_cache:null,_parser:function(e){var r,n,a=t;n=this.template.replace(/\{+\{/g,"{").replace(/\}\}+/g,"}").replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(/(\}@\/\w+\})(\s)(\{@\w+)(\s)(\{)/g,"$1$3$5").replace(/(\}@\/\w+\})(\s)(\{@\w+\{)/g,"$1$3").replace(/(\}@\/\w+\})(\s)(\{@\w+)(\s)(\{)/g,"$1$3$5").replace(/(\}@\/\w+\})(\{@\w+)(\s)(\{)/g,"$1$2$4").replace(a.connection,function(e){return e=e.replace(a.tagConnection,'";$1$2$3'),e+';sugarBuildTemplate +="'}).replace(a.tagStart,'";$1').replace(/\{@+/g," {@ ").replace(a.sentenceStart,function(e){return e.replace(/\\/g,"")+';sugarBuildTemplate +="'}).replace(a.tagClose,'";$1').replace(a.sentenceEnd,function(e){return e+';sugarBuildTemplate +="'}).replace(a.evaluate,"").replace(a.variant,function(e){return e=e.replace(a.variantExp,""),'"+'+e.replace(/\\/g,"")+'+"'}).replace(/[\r\n\t]/g," "),n=' "use strict"; var sugarBuildTemplate = "'+n+'"; return sugarBuildTemplate;';try{return this._cache=r=new Function("data",n),r(e)}catch(c){return'<h3>SugarTpl Error:</h3><h4 style="color: red;">'+c.message+"</h4>"}},compile:function(e,t){var r;return r=this._cache?this._cache(e):this._parser(e),t&&t(r),r}};return r.extend(r.fn,n),e=function(e,t){return""===e||"string"!=typeof e?!1:new r(e,t)}});